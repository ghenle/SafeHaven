import{config}from"./config.min.js";document.addEventListener("DOMContentLoaded",e=>{let t=window.location.pathname??"/",n=t.substring(1).split("/"),r=new URLSearchParams(window.location.search);var o=document.querySelectorAll('input:not([type="radio"]):not([type="hidden"])'),l=document.querySelectorAll('input[name^="utm_"]');let c=document.querySelector('input[name="service_area"]'),a=document.querySelector('input[name="in_service_area"]'),i=document.querySelector("#call > h2 > span"),s=document.querySelector("#call > h3 > a"),d=document.querySelector("#contact > form");var u=document.querySelector("#contact > form > button");let g=document.querySelector("#zip"),f=!1;console.log(n),o.forEach(e=>{if(e.hasAttribute("pattern")){let o=new RegExp("^"+e.getAttribute("pattern")+"$","i");e.addEventListener("blur",e=>{e.target.style.borderColor=o.test(e.target.value)?config.color.good:config.color.bad})}else e.addEventListener("blur",e=>{e.target.style.borderColor=e.target.value?config.color.good:config.color.bad})}),u.addEventListener("click",e=>{e.preventDefault();t;let o="UNKNOWN - location incorrect";f&&(e=g.value.match(/^\d{5}/),f.location,o=e?-1!==f.serviceZips.indexOf(e[0])?"YES":"NO":"UNKNOWN - zip code incorrect"),c.value=t,a.value=o,console.log(c.value),console.log(a.value),d.submit()}),l.forEach(e=>{var o=e.getAttribute("name");console.log(o),r.has(o)&&(e.value=r.get(o))}),fetch(config.URLs.locationData).then(e=>e.json()).then(e=>{let o=Object.keys(e);var t=n.filter(e=>-1!==o.indexOf(e)).shift();console.log("[XHR] location data: "+t),void 0!==t&&void 0!==e[t]&&(f=e[t],i.firstChild.nodeValue=f.location+" is",s.setAttribute("href","tel:"+f.phone))}).catch(e=>{console.error(e),console.log((new Error).stack)}),navigator.geolocation.getCurrentPosition(e=>{config.google.query.latlng=e.coords.latitude+","+e.coords.longitude;e=new URLSearchParams(config.google.query).toString(),e=config.google.url+"?"+e;fetch(e).then(e=>e.json()).then(e=>{e=e.results[0].address_components.find(e=>e.types.includes("postal_code")).long_name;g.style.borderColor=config.color.good,g.value=e,console.log("[XHR] geolocation data: "+e)}).catch(e=>{console.error(e),console.log((new Error).stack)})})});
//# sourceMappingURL=main.min.js.map