import{config}from"./config.min.js";document.addEventListener("DOMContentLoaded",e=>{let t=window.location.pathname??"/",n=t.substring(1).split("/"),r=new URLSearchParams(window.location.search),o=document.querySelectorAll('#contact > form input:not([type="radio"])');var c=document.querySelectorAll('input:not([type="radio"]):not([type="hidden"])'),l=document.querySelectorAll('input[name^="utm_"]');let a=document.querySelector('input[name="service_area"]'),i=document.querySelector('input[name="in_service_area"]'),d=document.querySelector("#call > h2 > span"),u=document.querySelector("#call > h3 > a"),s=document.querySelector("#contact > form");var g=document.querySelector("#contact > form > button"),m=document.querySelector("#contact > form div.gps > button");let f=document.querySelector("#zip"),p=!1,v=()=>{var e;t;let o="UNKNOWN - location incorrect";p&&(e=f.value.match(/^\d{5}/),p.location,o=e?-1!==p.serviceZips.indexOf(e[0])?"YES":"NO":"UNKNOWN - zip code incorrect"),a.value=t,i.value=o,console.log(a.value),console.log(i.value)};console.log(n),c.forEach(e=>{if(e.hasAttribute("pattern")){let o=new RegExp("^"+e.getAttribute("pattern")+"$","i");e.addEventListener("blur",e=>{e.target.style.borderColor=o.test(e.target.value)?config.color.good:config.color.bad})}else e.addEventListener("blur",e=>{e.target.style.borderColor=e.target.value?config.color.good:config.color.bad})}),g.addEventListener("click",e=>{e.preventDefault(),v(),s.submit()}),m.addEventListener("click",e=>{navigator.geolocation.getCurrentPosition(e=>{config.google.query.latlng=e.coords.latitude+","+e.coords.longitude;e=new URLSearchParams(config.google.query).toString(),e=config.google.url+"?"+e;fetch(e).then(e=>e.json()).then(e=>{e=e.results[0].address_components.find(e=>e.types.includes("postal_code")).long_name;f.style.borderColor=config.color.good,f.value=e,console.log("[XHR] geolocation data: "+e)}).catch(e=>{console.error(e),console.log((new Error).stack)})})}),u.addEventListener("click",e=>{let t=new FormData;t.append("phone",e.target.getAttribute("href")),v(),o.forEach(e=>{var o=e.getAttribute("name");t.append(o,e.value)}),fetch("/api/lead",{method:"POST",body:t})}),l.forEach(e=>{var o=e.getAttribute("name");console.log(o),r.has(o)&&(e.value=r.get(o))}),fetch(config.URLs.locationData).then(e=>e.json()).then(e=>{let o=Object.keys(e);var t=n.filter(e=>-1!==o.indexOf(e)).shift();console.log("[XHR] location data: "+t),void 0!==t&&void 0!==e[t]&&(p=e[t],d.firstChild.nodeValue=p.location+" is",u.setAttribute("href","tel:"+p.phone))}).catch(e=>{console.error(e),console.log((new Error).stack)})});
//# sourceMappingURL=main.min.js.map